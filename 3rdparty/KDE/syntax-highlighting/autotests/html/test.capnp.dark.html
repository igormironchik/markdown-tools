<!DOCTYPE html>
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<title>test.capnp</title>
<meta name="generator" content="KF5::SyntaxHighlighting - Definition (Cap'n Proto) - Theme (Breeze Dark)"/>
</head><body style="background-color:#232629;color:#cfcfc2"><pre>
<span style="color:#8e44ad">@0xdbb9ad1f14bf0b36</span>;  <span style="color:#7a7c7d"># unique file ID, generated by `capnp id`</span>
<span style="font-weight:bold">struct</span> Foo <span style="color:#8e44ad">@0x8db435604d0d3723</span> <span style="font-weight:bold">{</span> <span style="font-weight:bold">}</span>

<span style="font-weight:bold">struct</span> Person <span style="font-weight:bold">{</span>
  name <span style="color:#8e44ad">@0</span> <span style="color:#2980b9">:</span><span style="color:#2980b9">Text</span>;
  birthdate <span style="color:#8e44ad">@3</span> <span style="color:#2980b9">:</span><span style="color:#2980b9">Date</span>;
  phones <span style="color:#8e44ad">@2</span> <span style="color:#2980b9">:</span><span style="color:#2980b9">List</span><span style="color:#2980b9">(PhoneNumber)</span>;

  <span style="font-weight:bold">struct</span> PhoneNumber <span style="font-weight:bold">{</span>
    type <span style="color:#8e44ad">@1</span> <span style="color:#2980b9">:</span><span style="color:#2980b9">Type</span>;

    <span style="font-weight:bold">enum</span> Type <span style="font-weight:bold">{</span>
      mobile <span style="color:#8e44ad">@0</span>;
      home <span style="color:#8e44ad">@1</span>;
      work <span style="color:#8e44ad">@2</span>;
    <span style="font-weight:bold">}</span>
  <span style="font-weight:bold">}</span>
<span style="font-weight:bold">}</span>

<span style="font-weight:bold">struct</span> Dummy <span style="font-weight:bold">{</span>
  byName <span style="color:#8e44ad">@0</span> <span style="color:#2980b9">:</span><span style="color:#2980b9">Map(</span><span style="color:#2980b9">Text</span><span style="color:#2980b9">, Person)</span>;

  foo <span style="color:#8e44ad">@0</span> <span style="color:#2980b9">:</span><span style="color:#2980b9">Int32</span><span style="color:#2980b9"> </span><span style="color:#3f8058">=</span><span style="color:#27aeae"> </span><span style="color:#f67400">123</span>;
  bar <span style="color:#8e44ad">@1</span> <span style="color:#2980b9">:</span><span style="color:#2980b9">Text</span><span style="color:#2980b9"> </span><span style="color:#3f8058">=</span><span style="color:#27aeae"> </span><span style="color:#f44f4f">"blah"</span>;
  baz <span style="color:#8e44ad">@2</span> <span style="color:#2980b9">:</span><span style="color:#2980b9">List</span><span style="color:#2980b9">(</span><span style="color:#2980b9">Bool</span><span style="color:#2980b9">) </span><span style="color:#3f8058">=</span><span style="color:#27aeae"> </span>[<span style="color:#27aeae"> </span><span style="color:#27aeae;font-weight:bold">true</span>,<span style="color:#27aeae"> </span><span style="color:#27aeae;font-weight:bold">false</span>,<span style="color:#27aeae"> </span><span style="color:#27aeae;font-weight:bold">false</span>,<span style="color:#27aeae"> </span><span style="color:#27aeae;font-weight:bold">true</span><span style="color:#27aeae"> </span>];
  qux <span style="color:#8e44ad">@3</span> <span style="color:#2980b9">:</span><span style="color:#2980b9">Person </span><span style="color:#3f8058">=</span><span style="color:#27aeae"> </span>(<span style="color:#27aeae">name </span><span style="color:#2980b9">=</span><span style="color:#27aeae"> </span><span style="color:#f44f4f">"Bob"</span>,<span style="color:#27aeae"> email </span><span style="color:#2980b9">=</span><span style="color:#27aeae"> </span><span style="color:#f44f4f">"bob@example.com"</span>);
  corge <span style="color:#8e44ad">@4</span> <span style="color:#2980b9">:</span><span style="color:#2980b9">Void</span><span style="color:#2980b9"> </span><span style="color:#3f8058">=</span><span style="color:#27aeae"> void</span>;
  grault <span style="color:#8e44ad">@5</span> <span style="color:#2980b9">:</span><span style="color:#2980b9">Data</span><span style="color:#2980b9"> </span><span style="color:#3f8058">=</span><span style="color:#27aeae"> </span><span style="color:#f67400;font-style:italic">0x</span><span style="color:#f44f4f">"a1 40 33"</span>;

  <span style="font-weight:bold">union</span> <span style="font-weight:bold">{</span>
    circle <span style="color:#8e44ad">@1</span> <span style="color:#2980b9">:</span><span style="color:#2980b9">Float64</span><span style="color:#2980b9"> </span><span style="color:#3f8058">=</span><span style="color:#27aeae"> </span><span style="color:#f67400">nan</span>;      <span style="color:#7a7c7d"># radius</span>
    square <span style="color:#8e44ad">@2</span> <span style="color:#2980b9">:</span><span style="color:#2980b9">Float64</span><span style="color:#2980b9"> </span><span style="color:#3f8058">=</span><span style="color:#27aeae"> </span><span style="color:#f67400">12.23e+2</span>; <span style="color:#7a7c7d"># width</span>
  <span style="font-weight:bold">}</span>

  address <span style="color:#2980b9">:</span><span style="color:#2980b9">group</span><span style="color:#2980b9"> </span><span style="font-weight:bold">{</span>
    <span style="color:#7a7c7d"># Note:  This is a terrible way to use groups, and meant</span>
    <span style="color:#7a7c7d">#        only to demonstrate the syntax.</span>
    houseNumber <span style="color:#8e44ad">@8</span> <span style="color:#2980b9">:</span><span style="color:#2980b9">UInt32</span><span style="color:#2980b9"> </span><span style="color:#3f8058">=</span><span style="color:#27aeae"> </span><span style="color:#f67400;font-style:italic">0</span><span style="color:#f67400">123</span><span style="color:#da4453;text-decoration:underline">8</span>;
    city <span style="color:#8e44ad">@10</span> <span style="color:#2980b9">:</span><span style="color:#2980b9">Text</span><span style="color:#2980b9"> </span><span style="color:#3f8058">=</span><span style="color:#27aeae"> </span><span style="color:#f44f4f">"abc</span><span style="color:#3daee9">\n</span><span style="color:#f44f4f">def</span><span style="color:#da4453;text-decoration:underline">\</span><span style="color:#f44f4f">p</span><span style="color:#da4453;text-decoration:underline">\xa</span><span style="color:#f44f4f">x</span><span style="color:#3daee9">\xab</span><span style="color:#f44f4f">c"</span>;
  <span style="font-weight:bold">}</span>
<span style="font-weight:bold">}</span>

<span style="font-weight:bold">const</span> pi <span style="color:#2980b9">:</span><span style="color:#2980b9">Float32</span><span style="color:#2980b9"> </span><span style="color:#3f8058">=</span><span style="color:#27aeae"> </span><span style="color:#f67400">3.14159</span>;
<span style="font-weight:bold">const</span> foo <span style="color:#2980b9">:</span><span style="color:#2980b9">Int32</span><span style="color:#2980b9"> </span><span style="color:#3f8058">=</span><span style="color:#27aeae"> </span><span style="color:#f67400;font-style:italic">0x</span><span style="color:#f67400">123</span>;
<span style="font-weight:bold">const</span> bar <span style="color:#2980b9">:</span><span style="color:#2980b9">SomeStruct </span><span style="color:#3f8058">=</span><span style="color:#27aeae"> </span>(<span style="color:#27aeae">id </span><span style="color:#2980b9">=</span><span style="color:#27aeae"> .foo</span>,<span style="color:#27aeae"> message </span><span style="color:#2980b9">=</span><span style="color:#27aeae"> .bar</span>);

<span style="font-weight:bold">interface</span> Directory <span style="font-weight:bold">extends</span>(Node) <span style="font-weight:bold">{</span>
  list <span style="color:#8e44ad">@0</span> () -> (list <span style="color:#2980b9">:</span><span style="color:#2980b9">List</span><span style="color:#2980b9">(Entry)</span>);
  create <span style="color:#8e44ad">@1</span> (name <span style="color:#2980b9">:</span><span style="color:#2980b9">Text</span>) -> (file <span style="color:#2980b9">:</span><span style="color:#2980b9">File</span>);
  delete <span style="color:#8e44ad">@4</span> (name <span style="color:#2980b9">:</span><span style="color:#2980b9">Text</span>);
  link <span style="color:#8e44ad">@5</span> (name <span style="color:#2980b9">:</span><span style="color:#2980b9">Text</span>, node <span style="color:#2980b9">:</span><span style="color:#2980b9">Node</span>);
  read <span style="color:#8e44ad">@1</span> (startAt <span style="color:#2980b9">:</span><span style="color:#2980b9">UInt64</span><span style="color:#2980b9"> </span><span style="color:#3f8058">=</span><span style="color:#27aeae"> </span><span style="color:#f67400">0</span>, amount <span style="color:#2980b9">:</span><span style="color:#2980b9">UInt64</span><span style="color:#2980b9"> </span><span style="color:#3f8058">=</span><span style="color:#27aeae"> </span><span style="color:#f67400;font-style:italic">0x</span><span style="color:#f67400">ffffffffffffffff</span>)
       -> (data <span style="color:#2980b9">:</span><span style="color:#2980b9">Data</span>);
<span style="font-weight:bold">}</span>

<span style="font-weight:bold">interface</span> Assignable(T) <span style="font-weight:bold">{</span>
  <span style="color:#7a7c7d"># A generic interface, with non-generic methods.</span>
  get <span style="color:#8e44ad">@0</span> () -> (value <span style="color:#2980b9">:</span><span style="color:#2980b9">T</span>);
  set <span style="color:#8e44ad">@1</span> (value <span style="color:#2980b9">:</span><span style="color:#2980b9">T</span>) -> ();
<span style="font-weight:bold">}</span>

<span style="font-weight:bold">interface</span> AssignableFactory <span style="font-weight:bold">{</span>
  newAssignable <span style="color:#8e44ad">@0</span> [T] (initialValue <span style="color:#2980b9">:</span><span style="color:#2980b9">T</span>)
      -> (assignable <span style="color:#2980b9">:</span><span style="color:#2980b9">Assignable(T)</span>);
  <span style="color:#7a7c7d"># A generic method.</span>
<span style="font-weight:bold">}</span>

newUnsetAssignable <span style="color:#8e44ad">@1</span> [T] () -> (assignable <span style="color:#2980b9">:</span><span style="color:#2980b9">Assignable(T)</span>);
getNamedAssignable <span style="color:#8e44ad">@2</span> (name <span style="color:#2980b9">:</span><span style="color:#2980b9">Text</span>) -> (assignable <span style="color:#2980b9">:</span><span style="color:#2980b9">Assignable</span>);

<span style="font-weight:bold">struct</span> Baz <span style="font-weight:bold">{</span>
  bar <span style="color:#8e44ad">@0</span> <span style="color:#2980b9">:</span><span style="color:#2980b9">Foo.Bar</span>;

  <span style="font-weight:bold">using</span> Foo.Bar;
  bar <span style="color:#8e44ad">@0</span> <span style="color:#2980b9">:</span><span style="color:#2980b9">Bar</span>;

  <span style="font-weight:bold">using</span> T <span style="color:#3f8058">=</span><span style="color:#27aeae"> Foo.Bar</span>;
  bar <span style="color:#8e44ad">@0</span> <span style="color:#2980b9">:</span><span style="color:#2980b9">T</span>;

  baz <span style="color:#8e44ad">@0</span> <span style="color:#2980b9">:</span><span style="color:#2980b9">import </span><span style="color:#2980b9">"</span><span style="color:#2980b9">bar.capnp</span><span style="color:#2980b9">"</span><span style="color:#2980b9">.Baz</span>;
  <span style="color:#7a7c7d"># Use type "Baz" defined in bar.capnp.</span>
<span style="font-weight:bold">}</span>

<span style="font-weight:bold">using</span> Bar <span style="color:#3f8058">=</span><span style="color:#27aeae"> import </span><span style="color:#f44f4f">"bar.capnp"</span>;
<span style="font-weight:bold">using</span> <span style="font-weight:bold">import</span> "bar.capnp".Baz;

<span style="font-weight:bold">annotation</span> foo(<span style="font-weight:bold">struct</span>, <span style="font-weight:bold">enum</span>) <span style="color:#2980b9">:</span><span style="color:#2980b9">Text</span>;
<span style="color:#7a7c7d"># Declare an annotation 'foo' which applies to struct and enum types.</span>

<span style="font-weight:bold">struct</span> MyType <span style="color:#c45b00">$</span><span style="color:#c45b00">foo(</span><span style="color:#c45b00">"</span><span style="color:#c45b00">bar</span><span style="color:#c45b00">"</span><span style="color:#c45b00">) </span><span style="font-weight:bold">{</span>
  <span style="color:#7a7c7d"># ...</span>
<span style="font-weight:bold">}</span>

<span style="font-weight:bold">annotation</span> baz(*) <span style="color:#2980b9">:</span><span style="color:#2980b9">Int32</span>;
<span style="font-weight:bold">annotation</span> myAnnotation(<span style="font-weight:bold">struct</span>) <span style="color:#2980b9">:</span><span style="color:#2980b9">Int32</span><span style="color:#2980b9"> </span><span style="color:#c45b00">$</span><span style="color:#c45b00">baz(10)</span>;

<span style="color:#c45b00">$</span><span style="color:#c45b00">baz(1)</span>;  <span style="color:#7a7c7d"># Annotate the file.</span>

<span style="font-weight:bold">struct</span> MyStruct <span style="color:#c45b00">$</span><span style="color:#c45b00">baz(2) </span><span style="font-weight:bold">{</span>
  myField <span style="color:#8e44ad">@0</span> <span style="color:#2980b9">:</span><span style="color:#2980b9">Text</span><span style="color:#2980b9"> </span><span style="color:#3f8058">=</span><span style="color:#27aeae"> </span><span style="color:#f44f4f">"default"</span><span style="color:#27aeae"> </span><span style="color:#c45b00">$</span><span style="color:#c45b00">baz(3)</span>;
  number <span style="color:#8e44ad">@1</span> <span style="color:#2980b9">:</span><span style="color:#2980b9">Int32</span><span style="color:#2980b9"> </span><span style="color:#c45b00">$</span><span style="color:#c45b00">qux</span>;
  myUnion <span style="color:#2980b9">:</span><span style="color:#2980b9">union</span><span style="color:#2980b9"> </span><span style="color:#c45b00">$</span><span style="color:#c45b00">baz(4) </span><span style="font-weight:bold">{</span>
    <span style="color:#7a7c7d"># ...</span>
  <span style="font-weight:bold">}</span>
<span style="font-weight:bold">}</span>

<span style="font-weight:bold">interface</span> MyInterface <span style="color:#c45b00">$</span><span style="color:#c45b00">baz(7) </span><span style="font-weight:bold">{</span>
  myMethod <span style="color:#8e44ad">@0</span> (myParam <span style="color:#2980b9">:</span><span style="color:#2980b9">Text</span><span style="color:#2980b9"> </span><span style="color:#c45b00">$</span><span style="color:#c45b00">baz(9)</span>) -> () <span style="color:#c45b00">$</span><span style="color:#c45b00">baz(8)</span>;
<span style="font-weight:bold">}</span>

<span style="font-weight:bold">const</span> myConst <span style="color:#2980b9">:</span><span style="color:#2980b9">Int32</span><span style="color:#2980b9"> </span><span style="color:#3f8058">=</span><span style="color:#27aeae"> </span><span style="color:#f67400">123</span><span style="color:#27aeae"> </span><span style="color:#c45b00">$</span><span style="color:#c45b00">baz(11)</span>;

<span style="color:#c45b00">$</span><span style="color:#c45b00">corge(string = </span><span style="color:#c45b00">"</span><span style="color:#c45b00">hello</span><span style="color:#c45b00">"</span><span style="color:#c45b00">, number = 123)</span>;
<span style="color:#c45b00">$</span><span style="color:#c45b00">grault()</span>;  <span style="color:#7a7c7d"># value defaults to 123</span>
</pre></body></html>
